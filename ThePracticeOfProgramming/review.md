<!-- markdownlint-disable MD025 -->

# 한줄평

프로그램 대가들이 알려주는 실전팁

# 책 소개

프로그래밍 수련법은 브라이언 W. 커니핸과 롭 파이크가 쓴 책이다. 이 두분은 소프트웨어 분야에 있으면 한 번은 들었을 이름들이다. 간단히 두 분을 소개하면 브라이언 커니핸은 C언어를 데니스 리치와 함께 최초의 C언어 해설서인 "The C Programming Language"를 썼으며, Unix의 많은 프로그램을 작성하였으며 유명한 `awk` 스크립트 언어를 공동개발하였다. `awk`의 `k`가 커닝핸의 약자라고 한다. (출처:위키백과 [링크](https://ko.wikipedia.org/wiki/AWK)) 롭 파이크는 벨 연구소의 Unix 팀의 멤버로 Unix 시스템 개발자 중 한 명이다. 또한 `Plan9`, `Inferno` 라는 운영체제 개발에 참여했었다. 최근에는 구글에서 `Go language`를 개발에 참여한 것으로 알려져 있다. (출처:위키백과 [링크](https://ko.wikipedia.org/wiki/%EB%A1%AD_%ED%8C%8C%EC%9D%B4%ED%81%AC))

원서는 1999년도에 출판되었으며 2008년도에 김정민, 장혜식, 신성국이 번역하여 발행되었다.

# 감상평

서문에 있듯이 프로그래밍할 때 필요한 요소들에 대해 코드와 함께 실질적으로 설명한다. 사례로 설명하는 언어는 C, CPP, Java를 사례로 들고 있어 어찌보면 구식이라 할 수 있지만 언어 사용 순위 Java 1위(15.876%), C 2위(12.424%), CPP 4위(7.444%) (출처: TIOBE 2019 2월[링크](https://www.tiobe.com/tiobe-index/)) 이고 약 36%를 차지하는 것을 보면 충분히 효용이 있다고 할 수 있다. 사례 코드의 점유율은 제처두더라도 책에서 알려주는 방법들은 사례와 경험에 대한 이야기들은 내가 전에 고민 했었던 것들을 시원하게 해결해주는 부분들이어서 나에게 피가 되고 살이 되는 경험을 갖게 하였다.

책 구성을 보면 스타일, 알고리즘과 데이터 구조, 설계와 구현, 인터페이스, 디버깅, 테스트, 성능, 호환성, 표기법으로 개발을 할 때 매번 마주치게 되는 주제들이다. 이 책에 특징으로 각 장마다 연습문제와 더 읽어보기는 책을 이해하는데 더 많은 도움을 주었다. 연습문제 답이 없어 혼자 고민하는 수 밖에 없지만 답을 맞추고 틀리는 것이 중요한게 아니라 고민해서 나만의 답을 내어 보는 과정이 중요하다고 생각된다. 이번 독서 모임(개발자 한 달에 책 한 권 읽기:(https://www.facebook.com/dev.reader/))에서 연습문제에 대해 토론할 게 많을 것 같다.

2창 알고리즘과 데이터 구조부터 예제로 드는 코드가 내용 이해하는 데 중요한 요소라 코드 분석하는 데 시간을 많이 들였다. 몇몇 코드들은 눈으로는 이해하기가 어려워 연습장에 값들을 검토하고서 이해할 수 있었다.

다른 여타 책보다 책에 메모를 많이 하게 된 걸 보면 읽으면서 생각을 많이 하게 된거 같다. 이 책은 동료들에게 꼭 추천하고 싶은 책이다.

# 내용 갈무리

중요하다고 밑줄 친 부분이 너무 많다. 여기에 다 실을 순 없고 각 장에 대한 감상만 적어야 겠다. 각 장 시작에 주제에 따른 명언이 실려있는데 맘에 드는 명언들도 같이 적어서 내용을 상기시키려 한다.

## 1장 스타일

> 훌륭한 작가들이 때때로 작문법 규칙을 무시하는 일은 예부터 볼 수 있었다. 그러나 그럴 경우 독자들은 대신 틀린 작문법을 상쇄할만한 훌륭한 문장을 발견하기 마련이다. 만약, 그렇게 할 자신이 없다면 규칙을 따르는 게 최상의 방책일 것이다.\
\- 윌리엄 스트렁크(William Struck)와 E. B. 화이트(White), "The Elements of Style"

이 말 그대로 내가 훌륭한 코딩 스타일을 만들 자신이 없다면 코딩 스타일을 따르는 게 가장 좋은 방법이다.

내 경험상 개인 프로젝트이든 회사 프로젝트이든 코딩 스타일이 정해져 있지 않으면 개인이 코딩할 때마다 그 날의 변덕에 따라 바뀌었었다. 책에서 말하는 스타일을 일단 따르는 것도 스타일이 없을 땐 좋을 것 같다.

* 전역변수에는 서술적인 이름을, 지역변수에는 짧은 이름을 붙이라
* 프로그래머들은 때로 문맥과 상관없이 긴 변수 이름을 쓰려고 하지만, 이는 잘못된 것이다. 코드의 명료성은 간결함을 통해 얻을 수 있는 경우가 많다.

```cpp
for (theElementIndex = 0; theElementIndex < numberOfElements; theElementIndex++)
    elementArray[theElementIndex] = theElementIndex;
```

```cpp
for (i = 0; i < nelems; i++)
    elem[i] = i;
```

위처럼 긴 변수보단 아래 처럼 짧게 쓰라고 조언한다. 개인적으로는 첫번째 스타일로 주로 코딩하였는데 확실이 주저리주저리 코드가 길어지는 문제가 있었다. 두번째처럼 짧게 하려면 영어문화권이 아닌 우리로서는 좋은 코드들에서 어떻게 변수명을 줄이는 지 확인해보는게 좋을 것 같다. 최근에 본 "오픈소스의 네이밍 특징"(출처: 최규민 kakao brunch (https://brunch.co.kr/@goodvc78/12)) 블로그를 참고하면 괜찮은 이름을 만들때 도움이 될 것 같다.

* 일관성을 지켜라
  * 서로 관련이 있는 것들에는 연관된 이름을 붙여 상관관계를 보여줌과 동시에 그 차이점이 눈에 띄도록 한다. `queue.queueCapacity` 보단 `queue.capacity`로
* 함수 이름에는 능동형을 쓰라
  * 능동형으로 쓰면 함수가 어떤한 동작을 한다라는 의미를 담는 것으로 보인다.

```cpp
now = data.getTime();
putchar('\n');
```

```cpp
if (checkoctal(c))  // X 참,거짓 반환인지 모호함

if (isoctal(c)) // O 참, 거짓인지 명확하게
```

* 정확한 이름을 쓰라
* 표현식을 자연스럽게 쓰라

```cpp
// 부정을 포함하는 조건식은 언제나 이해하기 어렵다
if (!(block_id < actblks) || !(block_id >= unblocks))

// not 을 없애보자
if ((block_id >= actblks) || (block_id < unblocks))
```

추가로 내가 특정 숫자 범위를 검사할 때 쓰는 코드다.

```cpp
// 0 <= x < 10 표현
if ((0 <= x) && (x < 10))
```

* 부수효과를 조심하라
  * `++` 같은 연산자 사용을 조심하라라는 의미이다.

```cpp
str[i++] = str[i++] = ' '; // ???

// 나눠서
str[i++] = ' ';
str[i++] = ' ';
```

* 들여쓰기와 중괄호 `{}`를 쓰는 스타일에서는 일관성을 지키라

> 코드를 수정할 때, 자신만의 스타일을 절대 쓰지 않도록 한다. 코드의 일관성은 개발자 자신의 스타일보다 중요하다. 이 규칙을 따르면 삶이 더 편해지기 때문이다.

이 말에 100% 공감한다.

* 일관성을 위해 관용 표현을 사용하라
* c++에서 매크로 함수를 멀리하라
  * c++에서는 인라인함수가 있음
* 매직넘버에 이름을 달아주라
  * 개별 숫자들의 의미가 코드에 전혀 나타나있지 않았기 때문에 이 숫자들이 모두 신비롭게(magical) 보일 뿐이다.
* 숫자는 매크로로 쓰지 말고 상수로 정의하라
* 아스키 문자는 숫자 코드 말고 문자 상수로 쓰라
* 나쁜 코드에 대해 설명하지 말고 코드를 새로 짜라
* 주석과 코드가 모순되게 하지 말라
  * 주석은 코드에 일치하는 것이 돼서는 안 되며, 코드를 보충하는 것이 돼야 한다.

> 왜 그렇게 귀찮게 구는가? 스타일에 왜 그리 걱정하는 것일까?\
...중략...\
답은 잘 짠 코드는 대충 던져놓고 한 번도 정리하지 않은 코드보다 읽기도 쉽고 이해하기도 쉬울뿐더러 대부분의 경우에 에러도 적고 분량도 적은 편이기 때문이다.

## 2장. 알고리즘과 데이터 구조

> 결국 어떤 문제가 생겼을 때 올바른 해결책을 제시하는 것은 현장에서의 기법과 도구에 대한 숙련도뿐이며, 전문가다운 결과를 지속적으로 뽑아내는 것은 일정 수준 이상의 경험뿐이다.\
\- 레이먼드 필딩(Raymond Fielding), "특수효과 촬영 기법"

> 만약 생소한 분야의 프로그램을 개발하려 한다면, '반드시' 어떤 것들이 이미 되어 있는지를 알아내어서, 다른 사람들이 이미 잘해 놓은 것을 어설프게 다시 하느라 시간을 낭비하지 않도록 해야 한다.

아이작 뉴튼이 인용했던 `내가 더 멀리 보았다면 이는 거인들의 어깨 위에 올라서 있었기 때문이다.`문장과도 같은 의미이다.

2장에서는 검색, 정렬, 배열, 리스트, 트리, 해시 테이블을 코드와 쓰이는 목적을 잘 설명하고 있다. 눈으로만 보지 않고 연습장에 코드를 분석해서 이해하고 보니 저자가 말한 바를 더 쉽게 이해할 수 있었다.

2장은 요약 발췌로 마무리한다.

> 알고리즘을 선택할 때에는 여러 단게를 거쳐야 한다. 첫째, 여러 알고리즘과 데이터 구조들을 평가한다. 또, 프로그램이 처리할 데이터 양이 얼마나 많을지 예측해 봐야 한다.\
...중략...\
그 다음, 가능하다면 라이브러리나 언어에서 기본적으로 제공하는 기능을 사용하라.\
...중략...\
데이터 구조마다 각 연산에서 예상되는 소요 시간이 서로 다르며, 이런 특징을 기준으로 삼아, 쓰기에 적당한 데이터 구조를 선택하는 것이 좋다.\
...중략...\
전문적인 문제를 해결하기 위해서 존재하는 여러 데이터 구조들도 많지만, 대부부느 소프트웨어를 작성하는 데에는 앞에서 다룬 기본적인 데이터 구조만으로도 충분할 것이다.

## 3장. 설계와 구현

> 여러분이 테이블을 감추고 흐름도만 보여준다면 나는 뭐가 뭔지 계속 모를 것이다.\
테이블을 보여 달라. 그러면 대개 흐름도는 안 봐도 된다. 너무 뻔할 테니까.\
\- 프레드릭 P.브룩스 주니어(Frederick P.Brooks,Jr.), "The Mythical Man Month"

> 브룩스의 고전에 따르면 프로그램을 만들 때 가장 중요한 것은 데이터 구조의 설계다. 일단 데이터 구조를 만들었다면, 알고리즘은 보통 바로 결정할 수 있고, 그에 따른 코딩도 비교적 쉽다.

나도 프로그램을 짜기 전 계획할 때 데이터 구조를 먼저 정해야 동작을 정의하는데 수월했었다.

3장은 마르코프 체인 알고리즘을 설계, 구현하는 과정을 보여준다. 특히 이 장은 앞에서부터 이해를 하지 않고는 다음 페이지로 넘어가기가 힘들었다. 그래서인지 3장 읽는데 4시간 반정도 소요됐다. 시간이 오래 걸렸지만 이해할 수 있어서 만족한다.

이 장의 핵심은 교훈 소챕터에 있다.

> c++ STL처럼 규모가 큰 컨포넌트나 스크립트 언어가 제공하는 결합 배열과 문자열 처리는 코드 길이를 줄여주고, 개발 기간도 줄여준다. 물론 이런 기능을 쓰면 성능이 떨어질 수 있다는 대가를 치러야 한다. 하지만 앞에서 만든 마르코프 프로그램처럼 몇 초내에 끝나는 프로그램을 만들 때에는 큰 문제가 되지 않을 것이다.\
더 잘 드러나지 않는 문제는, 시스템이 제공해 주는 코드 부분이 너무 커져서 프로그램 내부에서 무슨 일이 일어나는지 아무도 모르게 되므로 개발자가 프로그램을 제어하고 이해하는 능력을 잃어버릴 수 있다는 것이다.

> 설계를 완벽히 끝내고 프로그램을 작성하는 것은 쉽지 않다. 실제로 프로그램을 만들 때에는 여러 가지 반복과 실험이 필요할 것이다.\
...중략...\
가능하다면 최대한 간단한 것부터 시작해서, 경험을 토대로 발전시켜 나아가길 바란다.

## 4장. 인터페이스

이 장 역시 예제 코드 이해가 되어야 했었다.

> 설계의 핵심은 서로 대립하는 목표와 제약 사이에 균형을 잡는데 있다.\
설계 단계에서 다뤄야 할 문제 들은 다음과 같다.\
\
\* 인터페이스: 어떤 서비스와 접근 권한을 제공할 것인가?\
\* 정보 은닉: 어떤 정보를 드러내고, 어떤 정보를 숨김 것인가?\
\* 자원 관리: 메모리나 기타 한정된 자원들을 누가 관리할 것인가?\
\* 에러 처리: 누가 에러를 감지하고, 누가 이 에러를 보고할 것인가?

대가의 노하우를 보는 느낌이었다.

> 좋은 라이브러리 설께 또는 좋은 인터페이스 설계는 단번에 얻어지지 않는다. 프레드 브룩스가 "한 번은 버릴 마음을 먹어라. 어차피 그렇게 될 것이므로."라고 썼을 정도다.\
...중략...\
보통은 임시 버전으로라도 직접 프로그램을 만들고 사용해 본 다음에야, 제대로 설계를 할 수 있을 만큼 관련 쟁점들을 충분히 이해할 수 있다.

설계와 구현, 인터페이스 장에서는 브룩스 교수님의 맨먼스미신 책의 내용이 인용된다. 맨먼스미신을 읽기 잘했다. 꼭 읽어야 할 고전이다.

> 이렇게 망가지기 쉬운 프로토타입은 개인적인 목적이나 접근 방식의 현실성을 보기 위한 용도로는 사용 할 수 있겠지만 그 이상은 무리다. 다른 구현 형태를 시도하기 전에 이 설계에 대해 다시 생각해 보자.

> 다른 사람이 쓸 수 있는 인터페이스를 만들려면 이 장 제일 처음에 나열했던 인터페이스, 정보 은닉, 자원 관리, 에러 처리를 고려해야 한다.

여기가 이 장의 핵심이다. CSV 처리 라이브러리를 만들때 고려하는 내용들과 c언어로 구현, c++로 구현하는 과정을 보면 대가들이 개발하는 과정을 보는 느낌이였다.

## 5장. 디버깅

> bug(버그)\
b. (1889년 "Pall Mall Gaz" 3월11일자 1-1호) 내가 듣기로 에디슨씨는 이틀밤을 꼬박 새우고서야 축음기에서 '벌레(bug)'를 발견했다. - 곤란한 문제를 해결할 때 쓰는 표현.\
어떤 상상의 벌레가 안에 숨어 모든 문제를 일으킨다는 뜻에서 나온 말이다.\
\- 옥스포드 영어 사전 2판